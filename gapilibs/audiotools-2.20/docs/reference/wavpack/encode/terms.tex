%This work is licensed under the
%Creative Commons Attribution-Share Alike 3.0 United States License.
%To view a copy of this license, visit
%http://creativecommons.org/licenses/by-sa/3.0/us/ or send a letter to
%Creative Commons,
%171 Second Street, Suite 300,
%San Francisco, California, 94105, USA.

\subsection{Writing Decorrelation Terms}
\label{wavpack:write_decorr_terms}
\ALGORITHM{a list of decorrelation terms, a list of decorrelation deltas}{decorrelation terms sub block data}
\SetKwData{TERM}{term}
\SetKwData{DELTA}{delta}
\SetKwData{KwDownTo}{downto}
\For(\tcc*[f]{populate in reverse order}){$p \leftarrow \text{decorrelation pass count}$ \emph{\KwDownTo}0}{
  $\text{\TERM}_p + 5 \rightarrow$ \WRITE 5 unsigned bits\;
  $\text{\DELTA}_p \rightarrow$ \WRITE 3 unsigned bits\;
}
\Return decorrelation terms sub block data\;
\EALGORITHM
\begin{figure}[h]
  \includegraphics{wavpack/figures/decorr_terms.pdf}
\end{figure}

\clearpage
For example, given decorrelation terms and deltas:
\begin{table}[h]
\begin{tabular}{rrr}
$p$ & $\textsf{term}_p$ & $\textsf{delta}_p$ \\
\hline
0 & 3 & 2 \\
1 & 17 & 2 \\
2 & 2 & 2 \\
3 & 18 & 2 \\
4 & 18 & 2 \\
\end{tabular}
\end{table}
\par
\noindent
the decorrelation terms sub block is written as:
\begin{figure}[h]
\includegraphics{wavpack/figures/terms_parse.pdf}
\end{figure}
